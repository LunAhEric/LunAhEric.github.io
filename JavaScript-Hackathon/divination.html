<!doctype html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
		integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">

	<title>手氣占卜</title>
	<style>
		img {
			transition: 0.3s;
		}

		img:hover {
			box-shadow: 0 0 20px rgb(253, 187, 5);
			transition: 0.3s;
		}

		.imgBtn {
			width: 100%;
		}
	</style>
</head>

<body>

	<div class="container my-4">
		<div class="row justify-content-center text-center">
			<div class="col-12">
				<h1 class=" mx-0">手氣占卜</h1>
			</div>
		</div>
		<div class="row justify-content-center text-center">
			<div fo-id="1" class="col-10 col-lg-3 img-fluid">
				<botton type="botton" class="imgBtn btn btn-lg">
					<img src="./img/00.svg" id="img">
				</botton>
			</div>
		</div>
		<div class="row justify-content-center text-center">
			<div id="msg" class="col-10 col-lg-3">

			</div>
		</div>
	</div>


	<script>
		window.onload = function () {

		}
		//格子資料
		let forTuneData = [
			{
				id: '1',
				img: './img/01.svg',
				value: '歐洲皇帝'
			},
			{
				id: '2',
				img: './img/02.svg',
				value: '平民百姓'
			},
			{
				id: '3',
				img: './img/03.svg',
				value: '非洲大酋長'
			},
			{
				id: '4',
				img: './img/04.svg',
				value: '天機不可洩漏'
			}
		]
		let imgData = ['./img/01.svg', './img/02.svg', './img/03.svg', './img/04.svg']

		let foSteps = 0 //剩餘步數
		let foAllSteps = 0 //全部步數
		let currentIndex = 0 //目前到哪一格
		let foSpeed = 0 //速率
		let num = 0
		let imgBtn = document.querySelector('.imgBtn')
		let img = document.querySelector('#img')
		let msg = document.querySelector('#msg')

		imgBtn.onclick = function () {
			imgBtn.classList.add('disabled')
			num = Math.floor(Math.random() * imgData.length)
			foSpeed = 100
			foSteps = num+10
			foAllSteps = foSteps
			turnAround()
		}

		function turnAround() {
			img.src = forTuneData[currentIndex].img
			currentIndex++
			if (currentIndex >= forTuneData.length) currentIndex = 0
			foSteps--
			let senum = Math.floor(Math.random() * forTuneData.length)
			msg.innerText = forTuneData[senum].value
			if (foSteps > 0) {
				setTimeout(turnAround, foSpeed);
			} else {
				img.src = forTuneData[num].img
				msg.innerText = forTuneData[num].value
				imgBtn.classList.remove('disabled')
			}
		}


	</script>


	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>

</body>

</html>